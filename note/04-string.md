# string 类型

## 1. string 类型的特征

- 存储的数据：单个数据，最简单的数据类型，也是最常用的存储类型

- 存储数据的格式：一个存储空间保存一个数据

- 存储空间：通常使用字符串，如字符以数值的形式展示，可以作为数字操作使用


## 2. string 类型的基本操作

- 添加/修改数据

```shell
set key value
```

- 获取数据

```shell
get key
```

- 删除数据

```shell
del key
```

- 添加/修改多个数据（M 即 multiple）

```shell
mset key1 value1 key2 value2 ...
```

- 获取多个数据

```shell
mget key1 key2 ...
``
```

- 获取数据字符个数

```shell
mstrlen key
```

- 追加信息到原始数据末尾（如原始存在则追加，否则新建）

如果 key 已经存在并且是一个字符串， APPEND 命令将指定的 value 追加到该 key 原来值（value）的末尾。

```shell
append key value
```

## 3. 单数据操作 与 多数据操作的选择


- 设置单条数据：`set key`
- 设置多条数据：`mset key1 value1 key2 value2`

假设每执行一个动作需要一个时间单位，那么执行一次命令，需要的时间单位为：发送执行命令（往）的时间 + 执行的时间 + 返回结果（返）的时间，一共需要 3 个时间单位。

- 单数据操作，执行 3 条指令的执行过程：往返 6 个单位 + 执行 3 个

- 多数据操作，执行 3 条指令的执行过程：往返 2 个单位 + 执行 3 个

## 4. string数值类型数据的操作

大型企业级应用中，因为大量的数据，所以通常使用分表的方式存储数据。在使用多张表存储同类型数据中，对应的主键 id 必须保证统一性，不能重复。Oracle 数据库具有 sequence 设定，可以解决该问题，但是 MySQL 数据库并不具有此类机制，那么我们就可以使用redis的整型数值的特性解决这个问题。


设置数值数据增加指定的值

```shell
# 对key的值增加1个单位
incr key
# 指定对key的值增加increment个单位
incrby key increment
# 指定对key的值增加increment值，increment可以是float类型的值
incrbyfloat key increment
```

设置数值数据减少指定的值

```shell
# 对key的值减少1个单位
decr key
# 指定对key的值减小increment个单位
decrby key increment
```

- string 在 redis 中内部存储默认就是一个字符串，当遇到增减类操作 incr，decr 时会转成数值型进行计算。
- redis 所有的操作都是原子性的，采用单线程处理所有的业务，命令是一个一个执行的，因此无需考虑并发带来的数据影响。

**注意**：按数值进行操作的数据，如果原始数据不能转成数值，或超越 redis 数值的上限范围，将会报错。
  redis中数值数据最大值为 9223372036854775807（java 中 long 型数据的最大值，Long.MAX_VALUE）


## 5. string类型的应用场景

一下有几个例子：

**（1）**：“最强女生”启动海选投票，只能通过微信投票，每个微信号每 4 个小时只能投 1 票。

**（2）**：电商商家开启热门商品推荐，热门商品不能一直处于热门期，每种商品热门期维持 3 天，3 天后自动取消热门。

**（3）**：新闻网站会出现热点新闻，热点新闻最大的特征是实效性，如何自动控制热点新闻的时效性。





