# set 类型的交并查操作

## 业务场景

脉脉为了促进用户之间的交流，保障业务承担率的提升，需要让每位用户拥有大量的好友，事实上职场新人不具有更多的职场好友，如何快速为用户积累更多的好友？

新浪微博为了增加用户热度，提高用户存留性，需要微博用户在关注更多的人，以此获得更多的信息或热门话题，如何提高用户关注他人的总量？

QQ 新用户的入网年龄越来越低，这些用户的朋友圈交际圈非常小，往往集中在一所学校甚至一个班级中，如何帮助用户快速积累好友带来更多的活跃度？

微信公众号是信息信息流通的渠道之一，增加用户关注的公众号称为提高用户活跃度的一种方式，如何帮助用户积累更多关注的公众号？

美团外卖为了提升成单量，必须帮助用户挖掘美食需求，如何推荐用户最适合自己的美食？

## 解决方案

- 求两个集合的交、并、差集

```
# 求交叉的数据
sinter key1 [key2]
# 求合并的数据
sunion key1 [key2]
# 求相差的数据，有方向性，用key1的集合  减去key1与key2的并集，得到的结果就是差集
sdiff key1 [key2]
```

- 求两个集合的交、并、差并存储到指定的集合中

```
sinterstore desination key1 [key2]
sunionstore desination key1 [key2]
sdiffstore desination key1 [key2]
```

如 将 u1 与 u2 的交集存到 u3

```
sinterstore u3 u1 u2
```

- 将指定数据从原始数据集合中移动到目标集合

```
smove source destination member
```

如将 u2 的 w1 移到 u1

```
smove u2 u1 w1
```

Tips 9

- redis 用户同类信息的关联搜索，二度关联搜索，深度关联搜索
- 显示共同关注（一度检索）
- 显示共同好友（一度检索）
- 由用户 A 出发，获取到好友用户 B 的好友信息列表（一度检索）
- 由用户 A 出发，获取到好友用户 B 的购物清单列表（二度检索）
- 由用户 A 出发，获取到好友用户 B 的游戏充值列表（二度检索）
