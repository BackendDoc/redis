# set 类型应用场景

**业务场景**

公司旗下新的网站做推广，统计网站的 PV（访问量），UV（独立访客），IP（独立 IP）

PV：网站被访问次数，可通过刷新界面提交访问里量
UV：网站被不同用户访问的次数，可通过 cookie 统计访问量，相同用户切换 IP 地址，UV 不变
IP：网站被不同 IP 地址访问的总次数，可通过 IP 地址统计访问量，相同 IP 不同用户访问，IP 不变

**解决方案**

- 利用 set 集合对数据去重特征，记录各种访问数据
- 利用 string 类型数据，利用 incr 统计日访问量
- 建立 set 模型，记录不同 cookie 数量（UV）
- 建立 set 模型，记录不同 IP 数量（IP）

如记录不同的 IP

```
sadd ips 1.2.3.4
sadd ips 2.3.4.5
sadd ips 2.3.4.5
```

虽然我们记录了 3 次 IP 地址，但有两次 IP 地址是一样的，所以一共有两个 IP，使用`scard ips`指令可以看到以下结果

```
(integer) 2
```

Tips 11:

- redis 应用于同类型数据的快速去重
